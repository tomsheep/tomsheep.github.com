---
layout: post
category : 儒林外史
title: 屌丝的自我修养（8）
date: 2012-04-11 22:34:07 +08:00
tagline:
tags: [IO模型, Yahoo, CEO, 点点]
---

1. 为什么媒体每次都比我先读到CEO发给全体员工的信？一定是我对“Confidential”这个词的理解有问题。

2. 点点的客服将昨天的封禁归因为“被举报多次发送spammer”，假设这条信息成立的话，那从中至少可以读出两点：

    * 举报的那孩子情商得有多低啊。
    * 点点的安全逻辑存在严重漏洞，恶意用户可以轻易对其他用户进行block。 

3.  他们总共花了6个小时来恢复我的账户，这让我很震惊。我觉得有必要向点点的技术团队推荐本屌丝的技术博客，希望对你们有帮助。

4. 关于IO模型，“同步/异步”、“阻塞/非阻塞”的概念在网络上资料中被严重混用。我看到最奇葩的一点是对select/poll模型的解释，一部分人认为是“同步非阻塞”的，还有一部分认为是“异步阻塞”（这个提法好奇特）的。后者主要来源于IBM developer流传甚广的[一篇文章][1]。出现这两种看法的原因在于双方根本不在一个位面上讨论问题：

    * 第一种观点对”异步“的理解为Where I/O really happens(是发起IO的进/线程还是其他)，这里的I/O有时可以狭义地指把数据从内核读到用户态，而”阻塞“则指发起I/O行为本身的调用（即read、write等） 是否立即得到就绪状态。因此按照这种理解，阻塞/非阻塞的概念只在”同步“的语义下make sense。

    * 而第二种观点，所持“异步”观念大致可以概括为“应用程序与内核交互是否基于notification”至于这个notification是针对“ 获取IO就绪状态”还是“发生真实IO”，就比较含糊了，甚至是混为一谈的。这种观点之所以认为select/poll是“异步阻塞”，因为select确然是基于异步notification来通知socket就绪状态的，而“阻塞”则是因为select系统调用是阻塞的。

    * 本屌丝个人认为第二种观点比较混乱，偏离了对“真实I/O如何发生”的论题。当然，去争辩select模型是同步异步、阻塞非阻塞本身就很蛋疼。按照第一种原教旨主义的IO定义，select作为一个阻塞的系统调用，其之后发生的“真实IO”可以阻塞，也可以非阻塞（当然非阻塞更make sense）。

5. epoll和poll外观相似, 用户层的代码也须调用read/write, 但因为其采用 mmap, 使得 内核socket buffer和用户buffer共享,省去了从内核到用户态的额外拷贝, 当调用返回时，read/write之前，数据已经在用户态了， 因此虽然epoll也是“当事件资源满足时发出可处理通知消息”，但简单地讲其归为“同步”是不合适的。IOCP是Windows下的纯异步IO模型，是当IO完成时发出完成通知消息。

6. 和socket描述符不同，一般文件系统文件是不支持non-blocking IO的。

7. 其实今天早上编排了好多嘲讽diandian的段子，打算写进今天的笔记。结果证明本屌丝脾气太好了，对方说几句台面话，我就不好意思了。所以，正如你们看到的这样，我欣然地接受了客服“上传一个头像以免被误杀”的建议。

[1]: http://www.ibm.com/developerworks/linux/library/l-async/?S_TACT=105AGX52&S_CMP=cn-a-l 
